!function(){"use strict";var t,e,n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},n(t,e)};function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}function r(t,e,n,o){var r,i=arguments.length,a=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,n,a):r(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a}function i(t,e,n,o){return new(n||(n=Promise))((function(r,i){function a(t){try{c(o.next(t))}catch(t){i(t)}}function s(t){try{c(o.throw(t))}catch(t){i(t)}}function c(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}c((o=o.apply(t,e||[])).next())}))}function a(t,e){var n,o,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(s){return function(c){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,s[0]&&(a=0)),a;)try{if(n=1,o&&(r=2&s[0]?o.return:s[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,s[1])).done)return r;switch(o=0,r&&(s=[2&s[0],r.value]),s[0]){case 0:case 1:r=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,o=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!(r=a.trys,(r=r.length>0&&r[r.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!r||s[1]>r[0]&&s[1]<r[3])){a.label=s[1];break}if(6===s[0]&&a.label<r[1]){a.label=r[1],r=s;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(s);break}r[2]&&a.ops.pop(),a.trys.pop();continue}s=e.call(t,a)}catch(t){s=[6,t],o=0}finally{n=r=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,c])}}}var s="__bugsee_instance",c="__bugsee_sync",u="@@BGSMSG@@",l="".concat(u,"-COMMINIT"),d=["string","number","boolean"],f="ascii",p=50,h="undefined",v=typeof window!==h,y=typeof self!==h;var b="undefined"!=typeof globalThis?globalThis:B?global:v?window:y?self:{};b.navigator,b.performance;var m=typeof Node!==h&&typeof Window!==h,g=typeof Event!==h,w=typeof WeakRef!==h,C=typeof Blob!==h,S=typeof Headers!==h,E=typeof FormData!==h,_=typeof Document!==h,k=typeof ArrayBuffer!==h,j=typeof TextDecoder!==h,T=typeof Symbol!==h,O=typeof PerformanceObserver!==h,x=typeof ReadableStream!==h,R=typeof URLSearchParams!==h,I=typeof MutationObserver!==h,N=typeof WorkerGlobalScope!==h&&self instanceof WorkerGlobalScope,B=!("nw"in b)&&typeof b.process!==h&&"[object process]"==={}.toString.call(b.process);!B&&!N&&v&&(null==b||b.HTMLElement);var D=!!(null===(t=b.Cordova)||void 0===t?void 0:t.exec)&&"function"==typeof(null===(e=b.Cordova)||void 0===e?void 0:e.exec),L={passive:!0},M=L,q=function(){function t(t,e){this._isDestroyed=!1,this._isEnabled=!1,this._injectionState=0,this._options=t,this.dataSourceName=this.constructor.componentName||"",e||this.onInit()}return t.prototype.destroy=function(){this._isDestroyed||(this.disable(),this.eject(),this.onDestroy(),this._options=null,this._isDestroyed=!0)},t.prototype.setOptions=function(t){this._options=t,this.canEnableSelf()||this.disable()},t.prototype.collectAndSendCurrentState=function(){},Object.defineProperty(t.prototype,"destroyed",{get:function(){return this._isDestroyed},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"injectionState",{get:function(){return this._injectionState},enumerable:!1,configurable:!0}),t.prototype.inject=function(){this._isDestroyed||0!==this._injectionState||(this._injectionState=2,this.onInject(),this._injectionState=1,this.onInjectedChanged(this._injectionState))},t.prototype.eject=function(){this._isDestroyed||1!==this._injectionState||(this._injectionState=3,this.onEject(),this._injectionState=0,this.onInjectedChanged(this._injectionState)),this.executeDeactivationCallbacks()},t.prototype.setInjected=function(t){t?this.inject():this.eject()},t.prototype.enable=function(){this._isDestroyed||this._isEnabled||!this.canEnableSelf()||(this._isEnabled=!0,this.onEnabledChanged(!0))},t.prototype.disable=function(){!this._isDestroyed&&this._isEnabled&&(this._isEnabled=!1,this.onEnabledChanged(!1))},t.prototype.setEnabled=function(t){t?this.enable():this.disable()},t.prototype.addDeactivationCallback=function(t){var e;t&&(this._deactivationCallbacks=this._deactivationCallbacks||[],null===(e=this._deactivationCallbacks)||void 0===e||e.push(t))},Object.defineProperty(t.prototype,"enabled",{get:function(){return this._isEnabled},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"options",{get:function(){return this._options},enumerable:!1,configurable:!0}),t.prototype.bindToLaunchOption=function(t){this._boundOptionName=t},t.prototype.onEnabledChanged=function(t){},t.prototype.onInjectedChanged=function(t){},t.prototype.onInit=function(){},t.prototype.onDestroy=function(){},t.prototype.onInject=function(){},t.prototype.onEject=function(){},t.prototype.canEnableSelf=function(){var t=this._boundOptionName;if(!t)return!0;var e=this._options;return!!e&&!!e[t]},t.prototype.executeDeactivationCallbacks=function(){var t=this._deactivationCallbacks;t&&(t.forEach((function(t){t()})),this._deactivationCallbacks=null)},t}(),P=new RegExp("^(?:[a-z+]+:)?//","i");function A(){}function z(t){return null==t}function H(t){return!z(t)&&"function"==typeof t}function W(t){return Array.isArray(t)}function U(t){return"string"==typeof t&&b.location&&!function(t){return!!t&&P.test(t)}(t)?new URL(t,b.location.href).href:t}function F(t){return t?t instanceof Array?t:Array.prototype.slice.call(t):t}function G(){return Date.now()}function J(){return b.performance?b.performance.timeOrigin:0}function V(){return t=0,b.performance?b.performance.timeOrigin+(t||b.performance.now()):G();var t}function X(){return b.performance?b.performance.now():0}function Y(t,e,n){if(t)for(var o=0;o<t.length;o++)e.call(n,t[o],o,t)}function $(t){if(m){if(t instanceof Window||t instanceof Node)return!1;if(Array.isArray(t)&&t.length>0&&(t[0]instanceof Window||t[0]instanceof Node))return!1}return!0}function K(){var t=new WeakSet;return function(e,n){if($(n)){if(g&&!e&&n instanceof Event&&(n=function(t){var e={};for(var n in t)try{var o=t[n];$(o)&&(e[n]=o)}catch(t){}return e}(n)),"object"==typeof n&&null!==n){if(t.has(n))return"[~circular~]";t.add(n)}return n}}}function Q(t,e,n){return JSON.stringify(t,e||K(),n)}function Z(){return(65536*(1+Math.random())|0).toString(16).substring(1)}function tt(t){if(z(t))return t;if(b.structuredClone)try{return b.structuredClone(t)}catch(t){}return JSON.parse(JSON.stringify(t))}function et(){var t;return(null===(t=b.crypto)||void 0===t?void 0:t.randomUUID)?b.crypto.randomUUID():"".concat(Z()).concat(Z(),"-").concat(Z(),"-").concat(Z(),"-").concat(Z(),"-").concat(Z()).concat(Z()).concat(Z())}var nt,ot,rt=(nt="LinkedObject",ot="".concat("__bugsee_symbol__").concat(nt),T?Symbol(ot):ot),it=Object.getOwnPropertyNames,at=Object.getOwnPropertyDescriptor,st=Object.defineProperty,ct=Object.isFrozen,ut=Object.assign;function lt(t,e){z(t)||ct(t)||(t[rt]=e)}function dt(t,e){if(!ct(e)){var n=H(t)||H(e);it(t).forEach((function(o){if(!n||"caller"!==o&&"callee"!==o&&"arguments"!==o){var r,i=at(e,o);if(!(r=i)||!1!==r.writable&&(!H(r.get)||typeof r.set!==h)){var a=at(t,o);if(a)try{st(e,o,a)}catch(n){e[o]=t[o]}else e[o]=t[o]}}}))}}function ft(t,e){return!!t&&(Object.hasOwn?Object.hasOwn(t,e):Object.prototype.hasOwnProperty.call(t,e))}function pt(t,e){var n=!1;return ft(t,e)?n=!!t[e]:function(t,e,n){t&&!ct(t)&&(ft(t,e)?t[e]=n:st(t,e,{configurable:!0,enumerable:!1,writable:!0,value:n}))}(t,e,!0),n}function ht(t){return function(e){st(e,"componentName",{configurable:!1,enumerable:!1,get:function(){return t}})}}function vt(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];console.warn.apply(console,t)}var yt=function(t){function e(e){return t.call(this,e)||this}return o(e,t),e.prototype.onDestroy=function(){Y(this._interceptors,(function(t){t.destroy()})),this._interceptors=null,this._lastState=null},e.prototype.setOptions=function(e){t.prototype.setOptions.call(this,e),Y(this._interceptors,(function(t){return t.setOptions(e)}))},e.prototype.getLastState=function(){return this._lastState},e.prototype.setLastState=function(t,e){void 0===e&&(e=!0),e&&(t=ut(this._lastState||{},t||{})),this._lastState=t},e.prototype.addInterceptors=function(t){var e=this;this._interceptors||(this._interceptors=[]),Y(t,(function(t){var n;try{var o=new t(e.onInterceptorData.bind(e),e.options);e._interceptors.push(o),o.setInjected(1===e.injectionState),o.setEnabled(e.enabled)}catch(o){vt('Failed to add interceptor "'.concat(t.componentName,'" to "').concat(null===(n=e.constructor)||void 0===n?void 0:n.name,'". Error follows'),o)}}))},e.prototype.collectAndSendCurrentState=function(){this.enabled&&Y(this._interceptors,(function(t){1===t.injectionState&&t.collectAndSendCurrentState()}))},e.prototype.getApiAugmentationInfo=function(){return null},e.prototype.onInterceptorData=function(t){},e.prototype.onEnabledChanged=function(e){t.prototype.onEnabledChanged.call(this,e),Y(this._interceptors,(function(t){return e?t.enable():t.disable()}))},e.prototype.onInjectedChanged=function(e){t.prototype.onInjectedChanged.call(this,e),Y(this._interceptors,(function(t){1===e?t.inject():0===e&&t.eject()}))},e}(q),bt=function(t){function e(e,n){var o=t.call(this,n,!0)||this,r=o,i=o.createBoundInterceptorCallback(e);return o._interceptorContext={get dataCallback(){return i},get enabled(){return r.enabled},get options(){return r.options},get dataSourceName(){return r.dataSourceName}},o.onInit(),o}return o(e,t),e.prototype.onDestroy=function(){t.prototype.onDestroy.call(this),this.releaseBoundEventHandlers(),this._interceptorContext=null,this._boundInjectCallbacks=null},e.prototype.onEject=function(){t.prototype.onEject.call(this),this.releaseBoundEventHandlers()},e.prototype.sendInterceptedData=function(t){var e;null===(e=this._interceptorContext)||void 0===e||e.dataCallback(t)},Object.defineProperty(e.prototype,"interceptorContext",{get:function(){return this._interceptorContext},enumerable:!1,configurable:!0}),e.prototype.addBoundEventHandlers=function(t){var e=this;if(0!==this.injectionState&&3!==this.injectionState&&(null==t?void 0:t.target)&&(null==t?void 0:t.events)){this._boundInjectCallbacks||(this._boundInjectCallbacks=[]);var n=t.target,o=t.options,r=t.events;n.addEventListener?Y(it(r),(function(t){var i,a,s=r[t].bind(e);n.addEventListener(t,s,o||M),null===(i=e._boundInjectCallbacks)||void 0===i||i.push({target:(a=n,w&&null!=a?a.deref?a:new WeakRef(a):a),eventName:t,method:s,options:o})})):vt("Can't attach event listeners to \"".concat(n,"\", as it doesn't seem to be valid EventTarget instance"))}},e.prototype.releaseBoundEventHandlers=function(){Y(this._boundInjectCallbacks,(function(t){if(t){var e=t.eventName,n=t.method,o=t.options,r=function(t){return w&&null!=t&&t.deref?t.deref():t}(t.target);if(r)try{r.removeEventListener(e,n,o||{})}catch(t){}t.target=null,t.method=null}})),this._boundInjectCallbacks=null},e.prototype.createBoundInterceptorCallback=function(t){return function(e){e.source||(e.source=this.dataSourceName),t(e)}.bind(this)},e}(q),mt=new WeakMap;function gt(t,e){var n=mt.get(t);return n||(n=Object.assign({id:et(),headers:{},attributes:{}},e||{}),mt.set(t,n)),n}function wt(t){return mt.get(t)}var Ct,St=10240,Et=["application/json","application/ld+json","application/xml","application/xhtml+xml","application/javascript","application/x-javascript","application/x-www-form-urlencoded","image/svg+xml"],_t=new RegExp("GET|HEAD|OPTIONS|CONNECT|TRACE","i"),kt=["cache","credentials","integrity","keepalive","mode","redirect","referrer","referrerPolicy"];!function(t){t.Http="http",t.WebSocket="ws",t.ServerSentEvents="sse"}(Ct||(Ct={}));var jt,Tt="start",Ot="complete",xt="error",Rt="timeout",It="abort",Nt="create",Bt="open",Dt="close",Lt="error",Mt="message",qt="size_too_large",Pt="no_content_type",At="unsupported_content_type",zt="cant_read_data";function Ht(t){if("string"!=typeof t)return!1;var e,n=null==(e=t.match(/^[^,; ]+/))?void 0:e[0];return!!n&&(/^text\/.*/i.test(n)||Et.indexOf(n)>-1)}function Wt(t,e){return i(this,void 0,void 0,(function(){return a(this,(function(n){switch(n.label){case 0:return e&&"arrayBuffer"in Blob.prototype?[4,t.arrayBuffer()]:[3,2];case 1:case 3:return[2,n.sent()];case 2:return e||!("text"in Blob.prototype)?[3,4]:[4,t.text()];case 4:return[2,new Promise((function(n,o){var r=new FileReader;r.onabort=o,r.onerror=o,r.onloadend=function(){n(r.result)},e?r.readAsArrayBuffer(t):r.readAsText(t)}))]}}))}))}function Ut(t,e){return void 0===e&&(e=St),i(this,void 0,void 0,(function(){var n,o;return a(this,(function(r){switch(r.label){case 0:return t?(n={size:t.size||0},t.size>e?(n.noBodyReason=qt,[3,6]):[3,1]):[2,{noBodyReason:zt}];case 1:return t.type?[3,2]:(n.noBodyReason=Pt,[3,6]);case 2:return Ht(t.type)?[3,3]:(n.noBodyReason=At,[3,6]);case 3:return r.trys.push([3,5,,6]),o=n,[4,Wt(t)];case 4:return o.body=r.sent(),[3,6];case 5:return r.sent(),n.body=null,n.noBodyReason=zt,[3,6];case 6:return[2,n]}}))}))}function Ft(t){var e=null;if(t){if(j)try{e=new TextDecoder(f).decode(t)}catch(t){}null===e&&(e="",new Uint8Array(t).forEach((function(t){e+=String.fromCharCode(t)})))}return e}function Gt(t,e){return i(this,void 0,void 0,(function(){var n,o,r,i,s,c,u;return a(this,(function(a){switch(a.label){case 0:n={},o=0,r="",i=t.getReader(),s=new TextDecoder(f),a.label=1;case 1:a.trys.push([1,5,,6]),a.label=2;case 2:return[4,i.read()];case 3:if((c=a.sent()).value){if((o+=c.value.byteLength)>e)return n.noBodyReason=qt,[3,4];if(null===(u=s.decode(c.value.buffer,{stream:!0})))return n.noBodyReason=zt,[3,4];r+=null!=u?u:""}return c.done?[3,4]:[3,2];case 4:return[3,6];case 5:return a.sent(),n.noBodyReason=zt,[3,6];case 6:try{i.releaseLock()}catch(t){}return n.noBodyReason||(n.size=o,n.body=r),[2,n]}}))}))}function Jt(t,e,n){var o,r,s;return i(this,void 0,void 0,(function(){var i,c,u,l,f;return a(this,(function(a){switch(a.label){case 0:return i={size:0,body:""},z(n)&&(n=St),t&&(c=parseInt(t["content-length"]||"",10),isNaN(c)||(i.size=c,c>n&&(i.noBodyReason=qt)),i.noBodyReason||((u=t["content-type"])?Ht(u)||(i.noBodyReason=At):i.noBodyReason=Pt)),i.noBodyReason||!e?[3,12]:(l=typeof e,f=null,d.indexOf(l)>-1?(f=String(e),[3,11]):[3,1]);case 1:return W(e)?(f=Q(e),[3,11]):[3,2];case 2:return C&&e instanceof Blob?[4,Ut(e,n)]:[3,4];case 3:return i=a.sent(),[3,11];case 4:return E&&e instanceof FormData?(f=function(t){if(t.forEach){var e={};return t.forEach&&t.forEach((function(t,n){t instanceof File?e[n]='<File size="'.concat(t.size,'" name="').concat(t.name||"",'" type="').concat(t.type||"",'">'):e[n]=null!=t?t:""})),Q(e)}return null}(e),[3,11]):[3,5];case 5:return _&&e instanceof Document?[3,11]:[3,6];case 6:return R&&e instanceof URLSearchParams?(f=function(t){if(t.forEach){var e={};return t.forEach&&t.forEach((function(t,n){e[n]=null!=t?t:""})),Q(e)}return null}(e),[3,11]):[3,7];case 7:return k&&e instanceof ArrayBuffer?(i.size=e.byteLength,i.size<=n&&(f=Ft(e)),[3,11]):[3,8];case 8:return k&&ArrayBuffer.isView(e)?(i.size=e.byteLength,i.size<=n&&(f=Ft(e.buffer)),[3,11]):[3,9];case 9:return x&&e instanceof ReadableStream?[4,Gt(e,n)]:[3,11];case 10:i=a.sent(),a.label=11;case 11:i.noBodyReason||i.body||null!==f||(i.noBodyReason=zt),i.size=null!==(s=null!==(o=i.size)&&void 0!==o?o:null===(r=f||i.body)||void 0===r?void 0:r.length)&&void 0!==s?s:0,i.noBodyReason||(i.size>n?(i.noBodyReason=qt,i.body=void 0):f&&(i.body=f)),a.label=12;case 12:return[2,i]}}))}))}function Vt(t,e){var n,o,r;return void 0===e&&(e=St),i(this,void 0,void 0,(function(){var i,s;return a(this,(function(a){switch(a.label){case 0:if(i=function(t,e){var n,o={};if(t){var r=parseInt(null!==(n=t.get("Content-Length"))&&void 0!==n?n:"",10);if(isNaN(r)||(o.size=r,r>e&&(o.noBodyReason=qt)),!o.noBodyReason){var i=t.get("Content-Type");i?Ht(i)||(o.noBodyReason=At):o.noBodyReason=Pt}}return o}(t.headers,e),i.noBodyReason)return[3,4];a.label=1;case 1:return a.trys.push([1,3,,4]),s=i,[4,t.text()];case 2:return s.body=a.sent(),[3,4];case 3:return a.sent(),i.noBodyReason=zt,[3,4];case 4:return i.size=null!==(r=null!==(n=i.size)&&void 0!==n?n:null===(o=i.body)||void 0===o?void 0:o.length)&&void 0!==r?r:0,!i.noBodyReason&&i.size>e&&(i.noBodyReason=qt,i.body=void 0),[2,i]}}))}))}function Xt(t){var e={};if(t)if(W(t))t.forEach((function(t){e[t[0].toLowerCase()]=t[1]}));else if(S&&t instanceof Headers)t.forEach((function(t,n){e[n.toLowerCase()]=t}));else for(var n in t)t.hasOwnProperty(n)&&(e[n.toLowerCase()]=t[n]);return e}function Yt(t,e,n,o,r){return{source:t,sequence:e||et(),timestamp:V(),data:{initiator:t,requestType:n,stage:o,url:U(r)}}}function $t(t,e,n,o){return Yt(t,e,Ct.Http,n,o)}function Kt(t,e,n,o){return Yt(t,e,Ct.WebSocket,n,o)}var Qt=!!at(null===(jt=b.XMLHttpRequestEventTarget)||void 0===jt?void 0:jt.prototype,"onload");function Zt(t,e,n){var o,r,i=!(!n.responseURL||n.responseURL===e.url);t.data.method=null==e?void 0:e.method,t.data.headers=(o=n.getAllResponseHeaders(),r={},null==o||o.split(/\n|\r\n/i).forEach((function(t){var e=function(t){if(!t)return null;var e=t.indexOf(":");return{name:t.substr(0,e).trim(),value:t.substr(e+1).trim()}}(t);(null==e?void 0:e.name)&&(r[e.name.toLowerCase()]=e.value)})),r),t.data.attributes={redirected:i,withCredentials:n.withCredentials,timeout:n.timeout,status:n.status,statusText:n.statusText}}function te(t){var e;if(t.enabled){var n=wt(this);if(n){var o=n.id,r=n.url,i=n.attributes,a=!(!this.responseURL||this.responseURL===r),s=$t(t.dataSourceName,o,Ot,a?this.responseURL:r);Zt(s,i,this),t.dataCallback(tt(s)),Jt(s.data.headers,this.response,null===(e=t.options)||void 0===e?void 0:e.maxNetworkBodySize).then((function(e){t.enabled&&(s.data.body=e,t.dataCallback(s))})).catch()}}}function ee(t){if(t.enabled){var e=wt(this);if(e){var n=e.id,o=e.url,r=e.attributes,i=$t(t.dataSourceName,n,It,o);Zt(i,r,this),t.dataCallback(i)}}}function ne(t){if(t.enabled){var e=wt(this);if(e){var n=e.id,o=e.url,r=e.attributes,i=$t(t.dataSourceName,n,Rt,o);Zt(i,r,this),t.dataCallback(i)}}}function oe(t){if(t.enabled){var e=wt(this);if(e){var n=e.id,o=e.url,r=e.attributes,i=$t(t.dataSourceName,n,xt,o);Zt(i,r,this),t.dataCallback(i)}}}function re(t){if(t.enabled&&this.readyState===XMLHttpRequest.DONE){if(0===this.status&&null===this.statusText)return void oe.call(this,t);te.call(this,t)}}function ie(t,e){return function(n,o,r,i,a){if(e.enabled){var s=wt(this);if(s||(!1===r||Qt||this.addEventListener("readystatechange",re.bind(this,e)),this.addEventListener("load",te.bind(this,e)),this.addEventListener("abort",ee.bind(this,e)),this.addEventListener("timeout",ne.bind(this,e)),this.addEventListener("error",oe.bind(this,e))),gt(this),s=wt(this)){s.url=U(o);var c=s.attributes;c.method=n||"GET",c.async=null==r||r,z(i)||(c.username=i),z(a)||(c.password=a)}}var u=t.apply(this,arguments);return!1===r||Qt||re.call(this,e),u}}function ae(t){var e,n=null===(e=null==b?void 0:b.XMLHttpRequest)||void 0===e?void 0:e.prototype;if(n){var o=n.open,r=n.send,i=n.setRequestHeader,a=n.overrideMimeType,s=ie(o,t),c=function(t,e){return function(n){var o,r=X(),i=t.apply(this,arguments);if(e.enabled){var a=wt(this);if(a){var s=a.id,c=a.url,u=a.attributes,l=$t(e.dataSourceName,s,Tt,c);l.data.timing={timeOrigin:J(),startTime:r},z(this.withCredentials)||(u.withCredentials=this.withCredentials),z(this.timeout)||(u.timeout=this.timeout),l.data.method=u.method,l.data.headers=ut({},a.headers),l.data.attributes=ut({},u),n&&!_t.test(a.attributes.method)?(e.dataCallback(tt(l)),Jt(l.data.headers,n,null===(o=e.options)||void 0===o?void 0:o.maxNetworkBodySize).then((function(t){l.data.body=t,e.dataCallback(l)})).catch()):e.dataCallback(l)}}return i}}(r,t),u=function(t,e){return function(n,o){var r=t.apply(this,arguments);if(e.enabled){var i=wt(this);i&&(i.headers[n.toLowerCase()]=o)}return r}}(i,t),l=function(t,e){return function(n){var o=t.apply(this,arguments);if(e.enabled){gt(this);var r=wt(this);r&&(r.attributes.mimeOverride=n)}return o}}(a,t);return lt(s,o),lt(c,r),lt(u,i),lt(l,a),n.open=s,n.send=c,n.setRequestHeader=u,n.overrideMimeType=l,function(){n.open=o,n.send=r,n.setRequestHeader=i,n.overrideMimeType=a}}return function(){}}var se=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.onEject=function(){this.restoreCallback&&this.restoreCallback(),this.restoreCallback=null},e.prototype.onInject=function(){this.restoreCallback=ae(this.interceptorContext)},e=r([ht("xmlhttprequest")],e)}(bt);function ce(t,e){e.method=t.method||"GET",kt.forEach((function(n){var o=t[n];z(o)||(e[n]=o)}))}function ue(t,e,n,o){var r,i,a=$t(e.dataSourceName,null,Tt),s=a.data;s.timing={startTime:t};var c,u,l={};if(n instanceof Request)s.url=U(n.url),s.method=n.method||"GET",s.headers=Xt(n.headers),u=n.signal,ce(n,l),l.destination=n.destination,l.isHistoryNavigation=n.isHistoryNavigation,l.isReloadNavigation=n.isReloadNavigation,_t.test(n.method)||(c=Vt(n.clone()));else if(s.url=U(n),s.method=o&&o.method||"GET",o&&(s.headers=Xt(o.headers),ce(o,l),u=o.signal,o.method&&!_t.test(o.method)))if(x&&o.body instanceof ReadableStream){var d=o.body.tee(),f=d[0],p=d[1];o.body=f,c=Jt(s.headers,p,null===(r=e.options)||void 0===r?void 0:r.maxNetworkBodySize)}else c=Jt(s.headers,o.body,null===(i=e.options)||void 0===i?void 0:i.maxNetworkBodySize);return s.attributes=l,u&&u.addEventListener("abort",le.bind(a,e),L),e.dataCallback(tt(a)),c&&c.then((function(t){a.data.body=t,e.dataCallback(a)})),a}function le(t){var e=$t(t.dataSourceName,this.sequence,It,this.data.url);t.dataCallback(e)}function de(t){var e=b.fetch;return b.fetch=function(n,o){var r=X(),i=e.apply(b,arguments);if(t.enabled){var a={requestEvent:ue(r,t,n,o),input:n,init:o};i.then((function(e){return function(t,e,n){var o=n.clone(),r=e.requestEvent,i=$t(t.dataSourceName,r.sequence,Ot,o.url),a=i.data;a.method=r.data.method,a.headers=Xt(o.headers),a.attributes={redirected:o.redirected,responseType:o.type,status:o.status,statusText:o.statusText},t.dataCallback(tt(i)),Vt(o).then((function(e){a.body=e,t.dataCallback(i)}))}(t,a,e),Promise.resolve(e)}),(function(e){return function(t,e,n){var o,r=e.requestEvent,i=$t(t.dataSourceName,r.sequence,xt,r.data.url);i.data.attributes={errorText:null!==(o=null==n?void 0:n.message)&&void 0!==o?o:""},t.dataCallback(i)}(t,a,e),Promise.reject(e)}))}return i},lt(b.fetch,e),function(){b.fetch=e}}var fe=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.onEject=function(){this.restoreCallback&&this.restoreCallback(),this.restoreCallback=null},e.prototype.onInject=function(){this.restoreCallback=de(this.interceptorContext)},e=r([ht("fetch")],e)}(bt);function pe(t){if(t.enabled){var e=wt(this);if(e){var n=Kt(t.dataSourceName,e.id,Bt,this.url);n.data.attributes={extensions:this.extensions},t.dataCallback(n)}}}function he(t,e){if(t.enabled){var n=wt(this);if(n){var o=Kt(t.dataSourceName,n.id,Dt,this.url);o.data.attributes=ut({},{code:e.code,reason:e.reason,wasClean:e.wasClean}),t.dataCallback(o)}}}function ve(t,e){var n;if(t.enabled){var o=wt(this);if(o){var r=Kt(t.dataSourceName,o.id,Mt,this.url);Jt(null,e.data,null===(n=t.options)||void 0===n?void 0:n.maxNetworkBodySize).then((function(e){r.data.body=e,t.dataCallback(r)})).catch((function(){t.dataCallback(r)}))}}}function ye(t,e){var n;if(t.enabled){var o=wt(this);if(o){var r=Kt(t.dataSourceName,o.id,Lt,this.url);r.data.attributes={errorText:null!==(n=null==e?void 0:e.message)&&void 0!==n?n:""},t.dataCallback(r)}}}function be(t,e){var n=gt(t);t.addEventListener("open",pe.bind(t,e),L),t.addEventListener("close",he.bind(t,e),L),t.addEventListener("message",ve.bind(t,e),L),t.addEventListener("error",ye.bind(t,e),L);var o=Kt(e.dataSourceName,n.id,Nt,t.url);o.data.attributes={protocol:t.protocol},e.dataCallback(o)}function me(t){var e=b.WebSocket,n=e.prototype,o=n.send,r=function(n,o){var r=function(t,e){if(!(null==e?void 0:e.length))return new t;switch(e.length){case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3]);case 5:return new t(e[0],e[1],e[2],e[3],e[4]);default:throw new Error("Arguments list is too long.")}}(e,arguments);return t.enabled&&be(r,t),r};return dt(b.WebSocket,r),b.WebSocket=r,n.send=function(e){var n;if(t.enabled){var r=wt(this);if(r){var i=Kt(t.dataSourceName,r.id,"send",this.url);Jt(null,e,null===(n=t.options)||void 0===n?void 0:n.maxNetworkBodySize).then((function(e){t.enabled&&(i.data.body=e,t.dataCallback(i))})).catch()}}return o.apply(this,arguments)},function(){b.WebSocket=e,n.send=o}}var ge=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.onEject=function(){this.restoreCallback&&this.restoreCallback(),this.restoreCallback=null},e.prototype.onInject=function(){this.restoreCallback=me(this.interceptorContext)},e=r([ht("ws")],e)}(bt),we='input[type=password]:not(.bugsee-hide), input[autocomplete*="cc-"]:not(.bugsee-hide)',Ce='input.bugsee-hide, textarea.bugsee-hide, select.bugsee-hide, input[autocomplete*="cc-"]';function Se(t){var e,n=t.parentNode;return null!==(e=null==n?void 0:n.host)&&void 0!==e?e:n===document?null:n}function Ee(t,e,n){var o=t.querySelector(e);if("createShadowRoot"in document.head||document.head.attachShadow){if(!n&&o)return o;var r=e.replace(/\s*([,>+~]+)\s*/g,"$1").split(" "),i=r.length-1,a=function(t,e){var n=[];return function t(e){for(var o=0;o<e.length;++o){var r=e[o];n.push(r);var i=r.shadowRoot||r.__bgs_shadowRoot;i&&t(i.querySelectorAll("*"))}}(t.querySelectorAll("*")),e?n.filter((function(t){var n;return null===(n=t.matches)||void 0===n?void 0:n.call(t,e)})):n}(t,r[i]),s=function(t,e){return function(n){for(var o=e,r=n,i=!1;r;){var a=r.matches(t[o]);if(a&&0===o){i=!0;break}a&&o--,r=Se(r)}return i}}(r,i);return n?a.filter(s):a.find(s)}return n?t.querySelectorAll(e):o}function _e(t,e){return Ee(t,e,!0)}function ke(t,e){return t.classList?t.classList.contains(e):(t.className||"").indexOf(e)>=0}function je(t,e){var n=t.getBoundingClientRect();return{top:n.top+(e?0:b.scrollY),left:n.left+(e?0:b.scrollX),width:n.width,height:n.height}}function Te(t){var e=je(t);return{left:Math.floor(e.left),top:Math.floor(e.top),right:Math.ceil(e.left+e.width),bottom:Math.ceil(e.top+e.height)}}function Oe(t,e){var n=je(e,!0),o=je(t),r=n.left+o.left,i=n.top+o.top;return{left:Math.floor(r),top:Math.floor(i),right:Math.ceil(r+n.width),bottom:Math.ceil(i+n.height)}}function xe(t,e,n){t.addEventListener(e,n,L)}function Re(t,e,n){t.removeEventListener(e,n)}function Ie(t){var e,n=null;try{n=t.contentDocument||(null===(e=t.contentWindow)||void 0===e?void 0:e.document)}catch(t){}return n}function Ne(t){var e;if("IFRAME"===t.nodeName){var n=Ie(t);return null==n?void 0:n.activeElement}return"#document"===t.nodeName?t.activeElement:null===(e=t.ownerDocument)||void 0===e?void 0:e.activeElement}var Be=[],De=null;function Le(t){if(De)try{return De.postMessage("".concat(u).concat(JSON.stringify(t))),!0}catch(t){vt("[Bugsee] Failed to send data to native layer via message channel",t)}return!1}function Me(t){(function(t){var e;return!!D&&(null===(e=b.Cordova)||void 0===e||e.exec(A,A,"Bugsee",t.message||"internal_".concat(t.action||"unknown"),[t.data]),!0)})(t)||function(t){var e;if(null===(e=b.BugseeJsListener)||void 0===e?void 0:e.onDataEntry)try{return b.BugseeJsListener.onDataEntry(JSON.stringify(t)),!0}catch(t){vt("[Bugsee] Failed to send data to native layer via injected listener",t)}return!1}(t)||Le(t)||function(t){"network"===t.source&&(Be.length>=p&&Be.shift(),Be.push(t))}(t)}function qe(){var t=tt(Be);return Be.length=0,t}function Pe(t){if(!De&&t.data===l){var e=function(t){if(W(t)&&t.length>0)return t[t.length-1]}(t.ports);e&&(De=e,e.start(),Re(b,"message",Pe),function(){var t;if(!D&&!(null===(t=b.BugseeJsListener)||void 0===t?void 0:t.onDataEntry)&&De)for(;Be.length>0;){var e=Be.shift();e&&Le(e)}}())}}var Ae=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.capturedRequests=[],e}return o(e,t),e.prototype.onInit=function(){this.bindToLaunchOption("captureNetwork"),this.addInterceptors([se,fe,ge]),O&&(this.resourcePO=new PerformanceObserver(this.onPerformaceTiming.bind(this)))},e.prototype.onDestroy=function(){var e;t.prototype.onDestroy.call(this),null===(e=this.resourcePO)||void 0===e||e.disconnect(),this.resourcePO=null},e.prototype.onEject=function(){var e;t.prototype.onEject.call(this),null===(e=this.resourcePO)||void 0===e||e.disconnect()},e.prototype.onInject=function(){var e;t.prototype.onInject.call(this);try{null===(e=this.resourcePO)||void 0===e||e.observe({type:"resource",buffered:!1})}catch(t){console.warn(t)}},e.prototype.sendRequestTiming=function(t,e){var n=!e;e=e||et();var o=n?"GET":void 0,r=n&&U(t.name)||"",i=t.initiatorType,a=n?Ot:"timing";t.timeOrigin=J(),t.name=void 0,t.initiatorType=void 0,Me({timestamp:t.startTime?t.timeOrigin+t.startTime:V(),sequence:e,source:"network",data:{url:r,method:o,requestType:"http",initiator:i,stage:a,timing:t}})},e.prototype.cleanRequestTiming=function(){for(var t=this.capturedRequests,e=X(),n=0;n<t.length;n++){e-t[n].startTime>6e4&&t.splice(n,1)}},e.prototype.onPerformaceTiming=function(t,e){if(this.enabled){for(var n=t.getEntries(),o=this.capturedRequests,r=J(),i=0;i<n.length;i++)for(var a=n[i],s=0;s<o.length;s++){var c=o[s];if(c.url===a.name&&c.initiator===a.initiatorType&&Math.abs(c.startTime-a.startTime)<=2){try{var u=a.toJSON();u.timeOrigin=r,this.sendRequestTiming(u,c.sequence)}catch(t){}o.splice(s,1),n.splice(i,1);break}}if(n.length){try{for(i=0;i<n.length;i++)this.sendRequestTiming(n[i].toJSON())}catch(t){}n.length=0}this.cleanRequestTiming()}},e.prototype.storeEntryForTiming=function(t){var e=t.sequence,n=t.data,o=n.url,r=n.timing,i=n.initiator,a=n.stage;e&&(null==r?void 0:r.startTime)&&"start"===a&&("fetch"===i||"xmlhttprequest"===i)&&this.capturedRequests.push({sequence:e,url:o,startTime:r.startTime,initiator:i}),this.cleanRequestTiming()},e.prototype.onInterceptorData=function(t){this.enabled&&(t.source="network",this.storeEntryForTiming(t),Me(t))},e}(yt),ze={textInputs:[],iframeTextInputs:[]};function He(t){!function(t){var e=F(_e(t,we));if(e)for(var n=0;n<e.length;++n)e[n].className+=" bugsee-hide"}(t);var e=F(_e(t,Ce)),n=[];if(e)for(var o=0;o<e.length;++o){var r=e[o];ke(r,"bugsee-show")||n.push(r)}return n}function We(t){var e="click"==t.type?"focus":t.type;Me({timestamp:V(),source:"views",action:"onFocusChanged",data:e})}function Ue(t,e){for(var n=0;n<t.length;++n){var o=t[n];e?(xe(o,"focus",We),xe(o,"click",We),xe(o,"blur",We)):(Re(o,"focus",We),Re(o,"click",We),Re(o,"blur",We))}}function Fe(t){try{var e=t.contentWindow;null==e||e.addEventListener("DOMContentLoaded",Je,!0),null==e||e.addEventListener("load",Je,!0)}catch(t){}}function Ge(t){ze.iframeTextInputs.length>0&&Ue(ze.iframeTextInputs,!1),ze.iframeTextInputs=[];var e,n,o=(e=document,n="iframe",e.querySelectorAll?e.querySelectorAll(n):F(e.getElementsByTagName(n)));if(o)for(var r=0;r<o.length;++r){var i=o[r],a=Ie(i);if(a)if("loading"!==a.readyState){for(var s=He(a),c=Ne(i),u=0;u<s.length;u++){var l=s[u],d=Oe(i,l);ze.iframeTextInputs.push(l),t.push({type:"text",rect:d}),l===c&&We({type:"focus"})}var f=_e(i,".bugsee-hide");if(f)for(u=0;u<f.length;u++){var p=f[u];d=Oe(i,p);"INPUT"!==p.nodeName&&t.push({type:"hiddenElement",rect:d})}}else try{Fe(i)}catch(t){}}ze.iframeTextInputs.length>0&&Ue(ze.iframeTextInputs,!0)}function Je(){var t=[];!function(t){ze.textInputs.length>0&&Ue(ze.textInputs,!1),ze.textInputs=He(document),Ue(ze.textInputs,!0);for(var e=Ne(document),n=0;n<ze.textInputs.length;++n){var o=ze.textInputs[n],r=Te(o);t.push({type:"text",rect:r}),o===e&&We({type:"focus"})}var i=_e(document,".bugsee-hide");if(i)for(n=0;n<i.length;n++){var a=i[n];r=Te(a),"INPUT"!==a.nodeName&&t.push({type:"hiddenElement",rect:r})}}(t),Ge(t),Me({timestamp:V(),source:"views",action:"onViewsUpdated",data:t})}var Ve,Xe,Ye,$e=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.mutationTimeoutID=null,e.fastMutationsCount=0,e.lastMutationTimestamp=0,e}return o(e,t),e.prototype.onInit=function(){I&&(this.observer=new MutationObserver(this.onMutation.bind(this)),this.boundMutationCallback=this.mutationCallback.bind(this))},e.prototype.onEject=function(){var e;t.prototype.onEject.call(this),null===(e=this.observer)||void 0===e||e.disconnect()},e.prototype.onInject=function(){var e;t.prototype.onInject.call(this);var n="onorientationchange"in b?"orientationchange":"resize";if(this.addBoundEventHandlers({target:b,options:L,events:(e={},e[n]=this.onOrientationChange,e.DOMContentLoaded=this.updateViews,e.load=this.updateViews,e)}),Je(),this.observer){this.observer.observe(document.body,{attributes:!0,childList:!0,characterData:!0,subtree:!0})}},e.prototype.onOrientationChange=function(){this.boundMutationCallback&&setTimeout(this.boundMutationCallback,100)},e.prototype.updateViews=function(){Je()},e.prototype.collectAndSendCurrentState=function(){Je()},e.prototype.mutationCallback=function(){this.mutationTimeoutID&&(clearTimeout(this.mutationTimeoutID),this.mutationTimeoutID=null),Je()},e.prototype.onMutation=function(t,e){var n=G();n-this.lastMutationTimestamp<150?this.fastMutationsCount++:this.fastMutationsCount=0,this.lastMutationTimestamp=n,this.boundMutationCallback&&(this.fastMutationsCount>=2?this.mutationTimeoutID||(this.mutationTimeoutID=setTimeout(this.boundMutationCallback,200)):this.boundMutationCallback())},e}(bt),Ke=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.onInit=function(){!function(){if(!pt(b,"__bugsee_ShadowDomPatched")){var t=b.Element;if(t){var e=t.prototype.attachShadow;e&&(t.prototype.attachShadow=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var o=e.apply(this,t);return this.__bgs_shadowRoot=o,o})}}}(),this.addInterceptors([$e])},e.prototype.onInterceptorData=function(t){this.enabled&&(t.source="views",Me(t))},e}(yt),Qe=new Ae,Ze=new Ke,tn=function(){function t(){}return t.prototype.launch=function(){Qe.inject(),Ze.inject(),Qe.enable(),Ze.enable()},t.prototype.stop=function(){Qe.eject(),Ze.eject()},t.prototype.pause=function(){Qe.disable(),Ze.disable()},t.prototype.resume=function(){Qe.enable(),Ze.enable()},t.prototype.sync=function(){Qe.collectAndSendCurrentState(),Ze.collectAndSendCurrentState()},t.prototype.setOptions=function(t){Qe.setOptions(t),Ze.setOptions(t)},t}();if(b[c]||st(b,c,{configurable:!1,enumerable:!1,get:function(){return qe}}),!b[s]){xe(b,"message",Pe);var en=new tn,nn=b.__bugsee_options;!nn||(Ye=typeof(Xe=nn),null==Xe||"object"!==Ye&&"function"!==Ye)||en.setOptions(nn),null===(Ve=Object.freeze)||void 0===Ve||Ve.call(Object,en),st(b,s,{configurable:!1,enumerable:!1,get:function(){return en}}),en.launch()}}();
